Gemini

XÃ¢y dá»±ng Dashboard Shopee Affiliate
Cuá»™c trÃ² chuyá»‡n má»›i
Ná»™i dung cá»§a tÃ´i
HÃ¬nh áº£nh vá» 
HÃ¬nh áº£nh vá» 
HÃ¬nh áº£nh vá» 
Gem
Cuá»™c trÃ² chuyá»‡n
XÃ¢y dá»±ng Dashboard Shopee Affiliate
Táº¡o Dashboard BÃ¡o CÃ¡o Shopee Affiliate
HÃ¬nh áº£nh Ä‘Ã¡nh lá»«a thá»‹ giÃ¡c: QuÃ¡i váº­t hay tráº» con?
PhÃ¢n tÃ­ch API Shopee Affiliate
PhÃ¢n tÃ­ch dá»¯ liá»‡u Shopee Affiliate
HÆ°á»›ng dáº«n táº¡o tool chuyá»ƒn Ä‘á»•i link FB
TÃ´i muá»‘n táº¡o logo: Xem LÃ  Chá»‘t
Táº¡o áº£nh AI
HÆ°á»›ng dáº«n táº¡o tool láº¥y UID Facebook

CÃ i Ä‘áº·t vÃ  trá»£ giÃºp
TrÃ² chuyá»‡n vá»›i Gemini
ÄÃ¢y lÃ  táº­p dá»¯ liá»‡u thá»‘ng kÃª theo khoáº£ng ngÃ y Ä‘Æ°á»£c chá»n cá»§a affilate shopee cá»§a 1 tÃ i khoáº£n. TÃ´i muá»‘n báº¡n phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  lÃ m 1 website cÃ³ thá»ƒ up file dá»¯ liá»‡u lÃªn vÃ  cho ra cÃ¡c loáº¡i thá»‘ng kÃª theo cÃ¡c loáº¡i biá»ƒu Ä‘á»“ há»£p lÃ½.



1. Thá»•ng kÃª tá»•ng quan:

- Tá»•ng doanh thu

- Tá»•ng hoa há»“ng

- Hoa há»“ng shopee

- Hoa há»“ng xtra

- Hoa há»“ng trung bÃ¬nh/Ä‘Æ¡n

- Tá»‰ lá»‡ hoa há»“ng



2. ThÃ´ng kÃª Ä‘Æ¡n hÃ ng:

- Tá»•ng Ä‘Æ¡n

+ ÄÆ¡n video

+ ÄÆ¡n live

+ ÄÆ¡n social

+ ÄÆ¡n 0 Ä‘á»“ng

+ ÄÆ¡n há»§y



3. Biá»ƒu Ä‘á»“:

- Biá»ƒu Ä‘á»“ hoa há»“ng(shopee, xtra)

- Biá»ƒu Ä‘á»“ Ä‘Æ¡n hÃ ng

- Biá»ƒu Ä‘á»“ theo kÃªnh bÃ¡n hÃ ng: (Facebook, Others, Instagram, Zalo...)

- Biá»ƒu Ä‘á»“ hoa há»“ng theo ngÃ y

- Biá»ƒu Ä‘á»“ hoa há»“ng theo giá»

- Biá»ƒu Ä‘á»“ hoa há»“ng theo danh má»¥c sáº£n pháº©m



4. Liá»‡t kÃª Top 5 shop cÃ³ nhiá»u Ä‘Æ¡n nháº¥t

- Gá»“m: tÃªn shop, Tá»•ng GMV, Sá»‘ Ä‘Æ¡n, Hoa há»“ng, Tá»‰ lá»‡ hoa há»“ng



5. Liá»‡t kÃª Top 5 sáº£n pháº©m ná»•i báº­t

- Gá»“m: tÃªn sáº£n pháº©m, Tá»•ng GMV, Sá»‘ Ä‘Æ¡n, Hoa há»“ng, Tá»‰ lá»‡ hoa há»“ng



6. Liá»‡t kÃª 10 Subid Ä‘Ã³ng gÃ³p Ä‘Æ¡n nhiá»u nháº¥t

- Gá»“m: TÃªn Subid, Sá»‘ lÆ°á»£ng Ä‘Æ¡n, Sá»‘ tiá»n hoa há»“ng



7. Liá»‡t kÃª chi tiáº¿t Ä‘Æ¡n hÃ ng

- Táº¥t cáº£ Ä‘Æ¡n (Sá»‘ lÆ°á»£ng Ä‘Æ¡n)

+ ID Ä‘Æ¡n hÃ ng, TÃªn shop, TÃªn Item, GiÃ¡, Sá»‘ lÆ°á»£ng, Tá»•ng hoa há»“ng, Tráº¡ng thÃ¡i, KÃªnh, Subid1, Subid2, Subid3, Subid4, Subid5

- ÄÆ¡n Ä‘ang chá» xá»­ lÃ½

+ ID Ä‘Æ¡n hÃ ng, TÃªn shop, TÃªn Item, GiÃ¡, Sá»‘ lÆ°á»£ng, Tá»•ng hoa há»“ng, Tráº¡ng thÃ¡i, KÃªnh, Subid1, Subid2, Subid3, Subid4, Subid5

- ÄÆ¡n Ä‘Ã£ há»§y

+ ID Ä‘Æ¡n hÃ ng, TÃªn shop, TÃªn Item, GiÃ¡, Sá»‘ lÆ°á»£ng, Tá»•ng hoa há»“ng, Tráº¡ng thÃ¡i, KÃªnh, Subid1, Subid2, Subid3, Subid4, Subid5

ChÃ o báº¡n, tÃ´i Ä‘Ã£ phÃ¢n tÃ­ch file CSV AffshopeeT12026.csv báº¡n cung cáº¥p. Dá»¯ liá»‡u nÃ y chá»©a Ä‘áº§y Ä‘á»§ thÃ´ng tin cáº§n thiáº¿t (ID Ä‘Æ¡n, Tráº¡ng thÃ¡i, Doanh thu, Hoa há»“ng, KÃªnh, Sub_id...) Ä‘á»ƒ xÃ¢y dá»±ng má»™t Dashboard bÃ¡o cÃ¡o hoÃ n chá»‰nh.

Äá»ƒ Ä‘Ã¡p á»©ng yÃªu cáº§u "lÃ m má»™t website" nhanh chÃ³ng, hiá»‡u quáº£ vÃ  dá»… sá»­ dá»¥ng nháº¥t cho viá»‡c phÃ¢n tÃ­ch dá»¯ liá»‡u (Data Analysis), tÃ´i Ä‘á» xuáº¥t sá»­ dá»¥ng Streamlit. ÄÃ¢y lÃ  má»™t framework Python cho phÃ©p biáº¿n cÃ¡c script phÃ¢n tÃ­ch dá»¯ liá»‡u thÃ nh má»™t trang web tÆ°Æ¡ng tÃ¡c chá»‰ trong vÃ i phÃºt mÃ  khÃ´ng cáº§n code HTML/CSS phá»©c táº¡p.

DÆ°á»›i Ä‘Ã¢y lÃ  mÃ£ nguá»“n (Source code) hoÃ n chá»‰nh vÃ  hÆ°á»›ng dáº«n chi tiáº¿t Ä‘á»ƒ báº¡n cháº¡y trang web nÃ y trÃªn mÃ¡y tÃ­nh cá»§a mÃ¬nh.

1. PhÃ¢n tÃ­ch sÆ¡ bá»™ dá»¯ liá»‡u
Tá»« snippet file báº¡n gá»­i, tÃ´i xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c cÃ¡c cá»™t quan trá»ng Ä‘á»ƒ xá»­ lÃ½:

Thá»i gian: Thá»i Gian Äáº·t HÃ ng

TÃ i chÃ­nh: GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«), Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«), Hoa há»“ng Shopee..., Hoa há»“ng Xtra...

PhÃ¢n loáº¡i: Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng, KÃªnh, Loáº¡i Shop, TÃªn Shop, TÃªn Item, L1 Danh má»¥c toÃ n cáº§u.

Tracking: Sub_id1 -> Sub_id5.

2. MÃ£ nguá»“n Website (Python + Streamlit)
Báº¡n hÃ£y táº¡o má»™t file tÃªn lÃ  app.py vÃ  dÃ¡n toÃ n bá»™ Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y vÃ o:

Python
import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime

# Cáº¥u hÃ¬nh trang
st.set_page_config(page_title="Shopee Affiliate Dashboard", layout="wide", page_icon="ğŸ›’")

# --- HÃ€M Xá»¬ LÃ Dá»® LIá»†U ---
@st.cache_data
def load_data(file):
    try:
        df = pd.read_csv(file)
        
        # 1. Xá»­ lÃ½ thá»i gian
        df['Thá»i Gian Äáº·t HÃ ng'] = pd.to_datetime(df['Thá»i Gian Äáº·t HÃ ng'])
        df['NgÃ y'] = df['Thá»i Gian Äáº·t HÃ ng'].dt.date
        df['Giá»'] = df['Thá»i Gian Äáº·t HÃ ng'].dt.hour
        
        # 2. Xá»­ lÃ½ sá»‘ liá»‡u (xÃ³a dáº¥u pháº©y, chuyá»ƒn sang sá»‘)
        cols_to_numeric = [
            'GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)', 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', 
            'Hoa há»“ng Shopee trÃªn sáº£n pháº©m(â‚«)', 'Hoa há»“ng Xtra trÃªn sáº£n pháº©m(â‚«)', 
            'GiÃ¡(â‚«)', 'Sá»‘ lÆ°á»£ng'
        ]
        
        for col in cols_to_numeric:
            if col in df.columns:
                # Xá»­ lÃ½ náº¿u dá»¯ liá»‡u dáº¡ng chuá»—i cÃ³ dáº¥u pháº©y ngÃ n
                if df[col].dtype == 'object':
                     df[col] = df[col].astype(str).str.replace(',', '').str.replace('â‚«', '').replace('nan', '0')
                df[col] = pd.to_numeric(df[col], errors='coerce').fillna(0)

        # 3. Táº¡o cá»™t phÃ¢n loáº¡i ÄÆ¡n Video/Live dá»±a trÃªn cá»™t "KÃªnh" hoáº·c "Sub_id"
        # LÆ°u Ã½: Logic nÃ y phá»¥ thuá»™c vÃ o cÃ¡ch Shopee tráº£ vá» trong file cá»§a báº¡n.
        # á» Ä‘Ã¢y tÃ´i giáº£ Ä‘á»‹nh tÃ¬m tá»« khÃ³a trong cá»™t "KÃªnh"
        def classify_source(channel):
            channel = str(channel).lower()
            if 'video' in channel: return 'Video'
            if 'live' in channel: return 'Live'
            if 'facebook' in channel or 'instagram' in channel or 'zalo' in channel: return 'Social'
            return 'KhÃ¡c'
            
        df['PhÃ¢n loáº¡i nguá»“n'] = df['KÃªnh'].apply(classify_source)
        
        return df
    except Exception as e:
        st.error(f"Lá»—i khi Ä‘á»c file: {e}")
        return None

# --- GIAO DIá»†N CHÃNH ---
st.title("ğŸ“Š PhÃ¢n TÃ­ch Hiá»‡u Suáº¥t Shopee Affiliate")
st.markdown("---")

# Upload File
uploaded_file = st.file_uploader("Táº£i lÃªn file CSV bÃ¡o cÃ¡o Shopee cá»§a báº¡n", type=['csv'])

if uploaded_file is not None:
    df = load_data(uploaded_file)
    
    if df is not None:
        # Sidebar bá»™ lá»c
        st.sidebar.header("Bá»™ lá»c dá»¯ liá»‡u")
        
        # Lá»c theo ngÃ y
        min_date = df['Thá»i Gian Äáº·t HÃ ng'].min()
        max_date = df['Thá»i Gian Äáº·t HÃ ng'].max()
        date_range = st.sidebar.date_input("Chá»n khoáº£ng thá»i gian", [min_date, max_date])
        
        if len(date_range) == 2:
            start_date, end_date = date_range
            df_filtered = df[(df['Thá»i Gian Äáº·t HÃ ng'].dt.date >= start_date) & (df['Thá»i Gian Äáº·t HÃ ng'].dt.date <= end_date)]
        else:
            df_filtered = df

        # --- 1. THá»NG KÃŠ Tá»”NG QUAN ---
        st.header("1. Thá»‘ng KÃª Tá»•ng Quan")
        
        total_gmv = df_filtered['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)'].sum()
        total_comm = df_filtered['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum()
        comm_shopee = df_filtered['Hoa há»“ng Shopee trÃªn sáº£n pháº©m(â‚«)'].sum()
        comm_xtra = df_filtered['Hoa há»“ng Xtra trÃªn sáº£n pháº©m(â‚«)'].sum()
        total_orders = len(df_filtered)
        avg_comm = total_comm / total_orders if total_orders > 0 else 0
        comm_rate = (total_comm / total_gmv * 100) if total_gmv > 0 else 0

        col1, col2, col3, col4, col5 = st.columns(5)
        col1.metric("Tá»•ng Doanh Thu (GMV)", f"{total_gmv:,.0f} â‚«")
        col2.metric("Tá»•ng Hoa Há»“ng", f"{total_comm:,.0f} â‚«")
        col3.metric("HH Shopee / Xtra", f"{comm_shopee:,.0f} / {comm_xtra:,.0f}")
        col4.metric("HH Trung bÃ¬nh/ÄÆ¡n", f"{avg_comm:,.0f} â‚«")
        col5.metric("Tá»· lá»‡ Hoa há»“ng", f"{comm_rate:.2f}%")

        st.markdown("---")

        # --- 2. THá»NG KÃŠ ÄÆ N HÃ€NG ---
        st.header("2. Thá»‘ng KÃª ÄÆ¡n HÃ ng")
        
        # PhÃ¢n loáº¡i Ä‘Æ¡n
        orders_video = df_filtered[df_filtered['PhÃ¢n loáº¡i nguá»“n'] == 'Video'].shape[0]
        orders_live = df_filtered[df_filtered['PhÃ¢n loáº¡i nguá»“n'] == 'Live'].shape[0]
        orders_social = df_filtered[df_filtered['PhÃ¢n loáº¡i nguá»“n'] == 'Social'].shape[0]
        orders_cancelled = df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'] == 'ÄÃ£ há»§y'].shape[0]
        orders_zero_comm = df_filtered[df_filtered['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'] == 0].shape[0]
        
        c1, c2, c3, c4, c5, c6 = st.columns(6)
        c1.metric("Tá»•ng Sá»‘ ÄÆ¡n", total_orders)
        c2.metric("ÄÆ¡n Video", orders_video)
        c3.metric("ÄÆ¡n Live", orders_live)
        c4.metric("ÄÆ¡n Social", orders_social)
        c5.metric("ÄÆ¡n 0 Ä‘á»“ng", orders_zero_comm, delta_color="inverse")
        c6.metric("ÄÆ¡n Há»§y", orders_cancelled, delta_color="inverse")

        st.markdown("---")

        # --- 3. BIá»‚U Äá»’ ---
        st.header("3. Biá»ƒu Äá»“ PhÃ¢n TÃ­ch")
        
        tab1, tab2, tab3 = st.tabs(["Thá»i gian & Xu hÆ°á»›ng", "KÃªnh & Danh má»¥c", "CÆ¡ cáº¥u Hoa há»“ng"])
        
        with tab1:
            col_chart1, col_chart2 = st.columns(2)
            
            # Biá»ƒu Ä‘á»“ hoa há»“ng theo ngÃ y
            daily_comm = df_filtered.groupby('NgÃ y')['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum().reset_index()
            fig_daily = px.line(daily_comm, x='NgÃ y', y='Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', title='Xu hÆ°á»›ng Hoa há»“ng theo NgÃ y', markers=True)
            col_chart1.plotly_chart(fig_daily, use_container_width=True)
            
            # Biá»ƒu Ä‘á»“ hoa há»“ng theo giá»
            hourly_comm = df_filtered.groupby('Giá»')['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum().reset_index()
            fig_hourly = px.bar(hourly_comm, x='Giá»', y='Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', title='Khung giá» ra nhiá»u Hoa há»“ng nháº¥t')
            col_chart2.plotly_chart(fig_hourly, use_container_width=True)

        with tab2:
            col_chart3, col_chart4 = st.columns(2)
            
            # Biá»ƒu Ä‘á»“ theo kÃªnh bÃ¡n hÃ ng (Dá»±a trÃªn cá»™t KÃªnh gá»‘c)
            channel_counts = df_filtered['KÃªnh'].value_counts().reset_index()
            channel_counts.columns = ['KÃªnh', 'Sá»‘ Ä‘Æ¡n']
            fig_channel = px.pie(channel_counts, names='KÃªnh', values='Sá»‘ Ä‘Æ¡n', title='Tá»· trá»ng ÄÆ¡n hÃ ng theo KÃªnh (Source)', hole=0.4)
            col_chart3.plotly_chart(fig_channel, use_container_width=True)
            
            # Biá»ƒu Ä‘á»“ theo danh má»¥c
            cat_comm = df_filtered.groupby('L1 Danh má»¥c toÃ n cáº§u')['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum().nlargest(10).reset_index()
            fig_cat = px.bar(cat_comm, x='Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', y='L1 Danh má»¥c toÃ n cáº§u', orientation='h', title='Top 10 Danh má»¥c hÃ¡i ra tiá»n')
            col_chart4.plotly_chart(fig_cat, use_container_width=True)

        with tab3:
             # Biá»ƒu Ä‘á»“ Hoa há»“ng Shopee vs Xtra
             comm_breakdown = pd.DataFrame({
                 'Loáº¡i': ['Shopee', 'Xtra'],
                 'GiÃ¡ trá»‹': [comm_shopee, comm_xtra]
             })
             fig_breakdown = px.pie(comm_breakdown, names='Loáº¡i', values='GiÃ¡ trá»‹', title='Tá»· lá»‡ Hoa há»“ng Shopee vs Xtra')
             st.plotly_chart(fig_breakdown, use_container_width=True)

        st.markdown("---")

        # --- 4 & 5 & 6. TOP LIST ---
        st.header("Báº£ng Xáº¿p Háº¡ng Top")
        
        col_top1, col_top2 = st.columns(2)
        
        with col_top1:
            st.subheader("4. Top 5 Shop nhiá»u Ä‘Æ¡n nháº¥t")
            top_shops = df_filtered.groupby('TÃªn Shop').agg({
                'GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)': 'sum',
                'Sá»‘ lÆ°á»£ng': 'count', # Äáº¿m dÃ²ng coi nhÆ° sá»‘ Ä‘Æ¡n
                'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)': 'sum'
            }).reset_index()
            top_shops['Tá»‰ lá»‡ HH'] = (top_shops['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'] / top_shops['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)'] * 100).round(2)
            top_shops.columns = ['TÃªn Shop', 'Tá»•ng GMV', 'Sá»‘ Ä‘Æ¡n', 'Hoa há»“ng', 'Tá»‰ lá»‡ HH (%)']
            st.dataframe(top_shops.sort_values('Sá»‘ Ä‘Æ¡n', ascending=False).head(5), hide_index=True)

        with col_top2:
            st.subheader("5. Top 5 Sáº£n pháº©m ná»•i báº­t (theo Hoa há»“ng)")
            top_items = df_filtered.groupby('TÃªn Item').agg({
                'GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)': 'sum',
                'Sá»‘ lÆ°á»£ng': 'sum',
                'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)': 'sum'
            }).reset_index()
            top_items['Tá»‰ lá»‡ HH'] = (top_items['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'] / top_items['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)'] * 100).round(2)
            top_items.columns = ['TÃªn Sáº£n Pháº©m', 'Tá»•ng GMV', 'Sá»‘ lÆ°á»£ng bÃ¡n', 'Hoa há»“ng', 'Tá»‰ lá»‡ HH (%)']
            st.dataframe(top_items.sort_values('Hoa há»“ng', ascending=False).head(5), hide_index=True)

        st.subheader("6. Top 10 SubID hiá»‡u quáº£ nháº¥t")
        if 'Sub_id1' in df_filtered.columns:
            top_sub = df_filtered.groupby('Sub_id1').agg({
                'Sá»‘ lÆ°á»£ng': 'count',
                'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)': 'sum'
            }).reset_index()
            top_sub.columns = ['SubID', 'Sá»‘ lÆ°á»£ng Ä‘Æ¡n', 'Tá»•ng hoa há»“ng']
            st.dataframe(top_sub.sort_values('Tá»•ng hoa há»“ng', ascending=False).head(10), use_container_width=True, hide_index=True)
        else:
            st.warning("KhÃ´ng tÃ¬m tháº¥y cá»™t Sub_id1 trong dá»¯ liá»‡u")

        st.markdown("---")

        # --- 7. CHI TIáº¾T ÄÆ N HÃ€NG ---
        st.header("7. Chi Tiáº¿t ÄÆ¡n HÃ ng")
        
        view_option = st.radio("Chá»n loáº¡i Ä‘Æ¡n hÃ ng muá»‘n xem:", ["Táº¥t cáº£ Ä‘Æ¡n", "ÄÆ¡n Ä‘ang chá» xá»­ lÃ½", "ÄÆ¡n Ä‘Ã£ há»§y"], horizontal=True)
        
        columns_to_show = [
            'ID Ä‘Æ¡n hÃ ng', 'TÃªn Shop', 'TÃªn Item', 'GiÃ¡(â‚«)', 'Sá»‘ lÆ°á»£ng', 
            'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', 'Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng', 'KÃªnh', 
            'Sub_id1', 'Sub_id2', 'Sub_id3', 'Sub_id4', 'Sub_id5'
        ]
        # Äáº£m báº£o chá»‰ láº¥y cá»™t cÃ³ trong file
        valid_cols = [c for c in columns_to_show if c in df_filtered.columns]

        if view_option == "Táº¥t cáº£ Ä‘Æ¡n":
            st.write(f"Tá»•ng sá»‘: {len(df_filtered)} Ä‘Æ¡n")
            st.dataframe(df_filtered[valid_cols], use_container_width=True)
            
        elif view_option == "ÄÆ¡n Ä‘ang chá» xá»­ lÃ½":
            # ChÃº Ã½: Cáº§n kiá»ƒm tra chÃ­nh xÃ¡c text trong CSV, thÆ°á»ng lÃ  "Äang chá» xá»­ lÃ½" hoáº·c "Chá» xá»­ lÃ½"
            pending_orders = df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'].str.contains('chá»', case=False, na=False)]
            st.write(f"Tá»•ng sá»‘: {len(pending_orders)} Ä‘Æ¡n")
            st.dataframe(pending_orders[valid_cols], use_container_width=True)
            
        elif view_option == "ÄÆ¡n Ä‘Ã£ há»§y":
            cancelled_orders = df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'].str.contains('há»§y', case=False, na=False)]
            st.write(f"Tá»•ng sá»‘: {len(cancelled_orders)} Ä‘Æ¡n")
            st.dataframe(cancelled_orders[valid_cols], use_container_width=True)

    else:
        st.info("Vui lÃ²ng táº£i lÃªn file CSV Ä‘á»ƒ báº¯t Ä‘áº§u phÃ¢n tÃ­ch.")
3. HÆ°á»›ng dáº«n cÃ i Ä‘áº·t vÃ  cháº¡y Website
Báº¡n khÃ´ng cáº§n mua tÃªn miá»n hay hosting Ä‘á»ƒ cháº¡y cÃ¡i nÃ y cho má»¥c Ä‘Ã­ch cÃ¡ nhÃ¢n. Báº¡n cÃ³ thá»ƒ cháº¡y ngay trÃªn mÃ¡y tÃ­nh cá»§a mÃ¬nh (Localhost).

BÆ°á»›c 1: CÃ i Ä‘áº·t Python Náº¿u mÃ¡y chÆ°a cÃ³ Python, hÃ£y táº£i vÃ  cÃ i Ä‘áº·t táº¡i python.org. (Nhá»› tick chá»n "Add Python to PATH" khi cÃ i).

BÆ°á»›c 2: CÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t Má»Ÿ Command Prompt (trÃªn Windows) hoáº·c Terminal (trÃªn Mac) vÃ  cháº¡y lá»‡nh sau:

Bash
pip install streamlit pandas plotly openpyxl
BÆ°á»›c 3: Táº¡o file code

Táº¡o má»™t thÆ° má»¥c má»›i trÃªn mÃ¡y tÃ­nh.

Táº¡o file app.py trong thÆ° má»¥c Ä‘Ã³.

Copy toÃ n bá»™ Ä‘oáº¡n code Python á»Ÿ má»¥c 2 vÃ  paste vÃ o file app.py, sau Ä‘Ã³ lÆ°u láº¡i.

BÆ°á»›c 4: Cháº¡y Website Táº¡i Command Prompt/Terminal (Ä‘ang á»Ÿ trong thÆ° má»¥c chá»©a file app.py), cháº¡y lá»‡nh:

Bash
streamlit run app.py
TrÃ¬nh duyá»‡t web sáº½ tá»± Ä‘á»™ng báº­t lÃªn vá»›i Ä‘á»‹a chá»‰ http://localhost:8501. BÃ¢y giá» báº¡n chá»‰ cáº§n kÃ©o file AffshopeeT12026.csv tháº£ vÃ o Ã´ Upload lÃ  xong!

4. Giáº£i thÃ­ch tÃ­nh nÄƒng Ä‘Ã£ tÃ­ch há»£p
Thá»‘ng kÃª tá»•ng quan: TÃ­nh toÃ¡n tá»± Ä‘á»™ng Doanh thu, Hoa há»“ng (tÃ¡ch Xtra/Shopee), tá»· lá»‡ % hoa há»“ng thá»±c táº¿.

PhÃ¢n loáº¡i Ä‘Æ¡n: Code tá»± Ä‘á»™ng Ä‘áº¿m Ä‘Æ¡n Há»§y, Ä‘Æ¡n 0 Ä‘á»“ng (hoa há»“ng = 0).

LÆ°u Ã½: Pháº§n Ä‘Æ¡n Video/Live tÃ´i Ä‘ang lá»c dá»±a trÃªn tá»« khÃ³a trong cá»™t "KÃªnh" (náº¿u tÃªn kÃªnh chá»©a chá»¯ "Video" hoáº·c "Live"). Náº¿u file thá»±c táº¿ cá»§a báº¡n Shopee khÃ´ng ghi rÃµ chá»¯ nÃ y trong cá»™t KÃªnh, báº¡n cÃ³ thá»ƒ cáº§n Ä‘iá»u chá»‰nh láº¡i logic Ã¡nh xáº¡ Sub_id.

Biá»ƒu Ä‘á»“ tÆ°Æ¡ng tÃ¡c:

Báº¡n cÃ³ thá»ƒ rÃª chuá»™t vÃ o biá»ƒu Ä‘á»“ Ä‘á»ƒ xem con sá»‘ chÃ­nh xÃ¡c.

Biá»ƒu Ä‘á»“ khung giá» giÃºp báº¡n biáº¿t giá» nÃ o khÃ¡ch mua nhiá»u nháº¥t Ä‘á»ƒ Ä‘áº©y traffic.

Top list: Tá»± Ä‘á»™ng xáº¿p háº¡ng Shop, Sáº£n pháº©m vÃ  SubID (giÃºp báº¡n biáº¿t link tracking nÃ o hiá»‡u quáº£ nháº¥t).

Báº£ng chi tiáº¿t: ÄÃ£ tÃ­ch há»£p bá»™ lá»c sáºµn Ä‘á»ƒ báº¡n xem nhanh cÃ¡c Ä‘Æ¡n "Äang chá»" xem tiá»n sáº¯p vá» lÃ  bao nhiÃªu, hoáº·c xem "ÄÆ¡n há»§y" Ä‘á»ƒ tá»‘i Æ°u láº¡i content.

Báº¡n hÃ£y thá»­ cháº¡y vÃ  cho tÃ´i biáº¿t náº¿u cáº§n Ä‘iá»u chá»‰nh gÃ¬ vá» cÃ¡ch hiá»ƒn thá»‹ nhÃ©!

TÃ´i muá»‘n up lÃªn hosting

Äá»ƒ Ä‘Æ°a website phÃ¢n tÃ­ch dá»¯ liá»‡u nÃ y lÃªn máº¡ng (hosting) Ä‘á»ƒ báº¡n cÃ³ thá»ƒ truy cáº­p tá»« báº¥t cá»© Ä‘Ã¢u hoáº·c gá»­i link cho ngÆ°á»i khÃ¡c xem, cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t, miá»…n phÃ­ vÃ  chuyÃªn nghiá»‡p nháº¥t cho code Streamlit lÃ  sá»­ dá»¥ng Streamlit Community Cloud.

Báº¡n khÃ´ng cáº§n mua server hay tÃªn miá»n phá»©c táº¡p. Quy trÃ¬nh gá»“m 3 bÆ°á»›c chÃ­nh.

BÆ°á»›c 1: Chuáº©n bá»‹ file requirements.txt
Äá»ƒ mÃ¡y chá»§ biáº¿t website cá»§a báº¡n cáº§n cÃ i nhá»¯ng thÆ° viá»‡n gÃ¬ (nhÆ° pandas, plotly...), báº¡n cáº§n táº¡o thÃªm 1 file tÃªn lÃ  requirements.txt náº±m cÃ¹ng thÆ° má»¥c vá»›i file app.py.

Ná»™i dung file requirements.txt:

Plaintext
streamlit
pandas
plotly
openpyxl
LÃºc nÃ y trong thÆ° má»¥c cá»§a báº¡n sáº½ cÃ³ 2 file code:

app.py (Code Python tÃ´i Ä‘Ã£ gá»­i á»Ÿ trÃªn)

requirements.txt (File khai bÃ¡o thÆ° viá»‡n)

BÆ°á»›c 2: ÄÆ°a code lÃªn GitHub (Kho chá»©a code)
Streamlit Cloud sáº½ láº¥y code tá»« GitHub Ä‘á»ƒ cháº¡y.

ÄÄƒng kÃ½ tÃ i khoáº£n táº¡i github.com (náº¿u chÆ°a cÃ³).

Táº¡o má»™t Repository má»›i (Giá»‘ng nhÆ° táº¡o 1 thÆ° má»¥c má»›i trÃªn máº¡ng):

Báº¥m dáº¥u + á»Ÿ gÃ³c trÃªn bÃªn pháº£i -> chá»n New repository.

Äáº·t tÃªn (vÃ­ dá»¥: shopee-dashboard).

Chá»n Public.

Báº¥m Create repository.

Táº£i file lÃªn:

Trong trang repository vá»«a táº¡o, báº¥m vÃ o dÃ²ng chá»¯ "uploading an existing file".

KÃ©o tháº£ 2 file app.py vÃ  requirements.txt vÃ o Ä‘Ã³.

Báº¥m nÃºt mÃ u xanh Commit changes á»Ÿ dÆ°á»›i cÃ¹ng.

âš ï¸ LÆ°u Ã½ quan trá»ng: KHÃ”NG táº£i file AffshopeeT12026.csv cá»§a báº¡n lÃªn GitHub vÃ¬ Ä‘Ã¢y lÃ  dá»¯ liá»‡u cÃ¡ nhÃ¢n/tÃ i chÃ­nh nháº¡y cáº£m vÃ  GitHub Public ai cÅ©ng xem Ä‘Æ°á»£c. Website cá»§a chÃºng ta cÃ³ chá»©c nÄƒng "Upload file" nÃªn khi nÃ o dÃ¹ng thÃ¬ báº¡n up file lÃªn sau, ráº¥t an toÃ n.

BÆ°á»›c 3: Triá»ƒn khai lÃªn Streamlit Cloud
Truy cáº­p share.streamlit.io vÃ  Ä‘Äƒng nháº­p (dÃ¹ng luÃ´n tÃ i khoáº£n GitHub vá»«a táº¡o á»Ÿ BÆ°á»›c 2).

Báº¥m nÃºt New app (hoáº·c "Deploy an app").

Äiá»n thÃ´ng tin:

Repository: Chá»n tÃªn repo báº¡n vá»«a táº¡o (vÃ­ dá»¥: yourname/shopee-dashboard).

Branch: ThÆ°á»ng lÃ  main.

Main file path: app.py.

Báº¥m nÃºt Deploy!.

Káº¿t quáº£
Chá» khoáº£ng 1-2 phÃºt Ä‘á»ƒ há»‡ thá»‘ng cÃ i Ä‘áº·t ("baking"). Sau khi xong, báº¡n sáº½ nháº­n Ä‘Æ°á»£c má»™t Ä‘Æ°á»ng link dáº¡ng https://shopee-dashboard-xyz.streamlit.app.

Báº¡n cÃ³ thá»ƒ vÃ o link nÃ y trÃªn Ä‘iá»‡n thoáº¡i hoáº·c mÃ¡y tÃ­nh báº¥t ká»³.

Khi cáº§n xem bÃ¡o cÃ¡o, báº¡n chá»‰ cáº§n báº¥m nÃºt Browse files trÃªn web vÃ  chá»n file CSV tá»« mÃ¡y cá»§a mÃ¬nh. Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c xá»­ lÃ½ ngay láº­p tá»©c vÃ  biáº¿n máº¥t khi báº¡n táº¯t tab (Ä‘áº£m báº£o báº£o máº­t).

TÃ¹y chá»n khÃ¡c (Náº¿u tháº¥y GitHub ráº¯c rá»‘i)
Náº¿u báº¡n khÃ´ng muá»‘n táº¡o tÃ i khoáº£n GitHub, báº¡n cÃ³ thá»ƒ dÃ¹ng Hugging Face Spaces (cÅ©ng miá»…n phÃ­):

ÄÄƒng kÃ½ tÃ i khoáº£n táº¡i huggingface.co.

VÃ o Spaces -> Create new Space.

Äáº·t tÃªn Space.

á» má»¥c Space SDK, chá»n Streamlit.

Báº¥m Create Space.

Trong giao diá»‡n má»›i, kÃ©o xuá»‘ng tÃ¬m má»¥c Files -> Add file -> Upload files.

KÃ©o 2 file app.py vÃ  requirements.txt vÃ o rá»“i báº¥m Commit.

Chá» vÃ i phÃºt, App sáº½ hiá»‡n ra á»Ÿ tab App.

Báº¡n muá»‘n thá»­ cÃ¡ch nÃ o? Náº¿u gáº·p khÃ³ khÄƒn á»Ÿ bÆ°á»›c táº¡o tÃ i khoáº£n hay upload, hÃ£y báº£o tÃ´i nhÃ©!

TÃ´i khÃ´ng tháº¥y Trong trang repository vá»«a táº¡o, báº¥m vÃ o dÃ²ng chá»¯ "uploading an existing file".

Ráº¥t cÃ³ thá»ƒ khi táº¡o Repository, báº¡n Ä‘Ã£ lá»¡ tÃ­ch vÃ o Ã´ "Add a README file" (ThÃªm file hÆ°á»›ng dáº«n). Khi Repository khÃ´ng cÃ²n rá»—ng (Ä‘Ã£ cÃ³ file README), giao diá»‡n sáº½ thay Ä‘á»•i vÃ  dÃ²ng chá»¯ "uploading an existing file" sáº½ biáº¿n máº¥t.

Äá»«ng lo, báº¡n hÃ£y lÃ m theo cÃ¡ch sau Ä‘á»ƒ tÃ¬m nÃºt upload nhÃ©:

CÃ¡ch xá»­ lÃ½ (Khi giao diá»‡n Ä‘Ã£ cÃ³ file README):
NhÃ¬n vÃ o gÃ³c trÃªn bÃªn pháº£i cá»§a danh sÃ¡ch file (ngang hÃ ng vá»›i tÃªn nhÃ¡nh main).

TÃ¬m nÃºt mÃ u xÃ¡m cÃ³ tÃªn Add file (cÃ³ mÅ©i tÃªn trá» xuá»‘ng â–¼).

Báº¥m vÃ o Ä‘Ã³ vÃ  chá»n Upload files.

Sau khi chá»n Upload files, giao diá»‡n sáº½ chuyá»ƒn sang mÃ n hÃ¬nh cho phÃ©p báº¡n kÃ©o tháº£ file. LÃºc nÃ y báº¡n lÃ m tiáº¿p cÃ¡c bÆ°á»›c:

KÃ©o 2 file app.py vÃ  requirements.txt tháº£ vÃ o khung lá»›n á»Ÿ giá»¯a mÃ n hÃ¬nh.

Äá»£i thanh táº£i lÃªn cháº¡y xong.

KÃ©o xuá»‘ng dÆ°á»›i cÃ¹ng, báº¥m nÃºt mÃ u xanh Commit changes.

Náº¿u váº«n khÃ´ng tháº¥y nÃºt "Add file"?
Náº¿u báº¡n Ä‘ang á»Ÿ trang chá»§ cá»§a Repository (trang cÃ³ Ä‘Æ°á»ng dáº«n dáº¡ng github.com/TÃªn-Cá»§a-Báº¡n/TÃªn-Repo) mÃ  váº«n khÃ´ng tháº¥y nÃºt nÃ o, báº¡n cÃ³ thá»ƒ thá»­ cÃ¡ch nhanh nháº¥t nÃ y:

Má»Ÿ thÆ° má»¥c trÃªn mÃ¡y tÃ­nh chá»©a file app.py.

KÃ©o tháº³ng file Ä‘Ã³ tháº£ trá»±c tiáº¿p vÃ o giá»¯a trang web GitHub Ä‘ang má»Ÿ. GitHub thÃ´ng minh sáº½ tá»± Ä‘á»™ng hiá»ƒu lÃ  báº¡n muá»‘n upload file vÃ  chuyá»ƒn sang mÃ n hÃ¬nh Commit.

Báº¡n thá»­ xem Ä‘Ã£ tháº¥y nÃºt Ä‘Ã³ chÆ°a nhÃ©!

Code trÃªn chÆ°a liá»‡t kÃª Ä‘Æ°á»£c 5 5 subid hiá»‡u quáº£ nháº¥t: má»›i tháº¥y cÃ³: SHPAAP0725, trong khi cÃ³: Pincuktech10mini, Video, Facebook...

ChÃ o báº¡n, tÃ´i hiá»ƒu rá»“i! Lá»—i náº±m á»Ÿ chá»— trong code máº«u trÆ°á»›c Ä‘Ã³, tÃ´i chá»‰ nhÃ³m theo cá»™t Sub_id1, trong khi dá»¯ liá»‡u Shopee Affiliate thÆ°á»ng ráº£i rÃ¡c cÃ¡c mÃ£ tracking (nhÆ° Facebook, Video, Pincuktech...) á»Ÿ cÃ¡c cá»™t tá»« Sub_id1 Ä‘áº¿n Sub_id5 tÃ¹y vÃ o cÃ¡ch báº¡n gáº¯n link.

TÃ´i Ä‘Ã£ cáº­p nháº­t láº¡i Ä‘oáº¡n code cho Má»¥c 6. Logic má»›i sáº½ lÃ : Gá»™p dá»¯ liá»‡u tá»« cáº£ 5 cá»™t Sub_id láº¡i, sau Ä‘Ã³ má»›i tÃ­nh toÃ¡n Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng bá» sÃ³t báº¥t ká»³ mÃ£ tracking nÃ o cá»§a báº¡n.

Báº¡n hÃ£y thay tháº¿ pháº§n # --- 6. TOP LIST --- trong file app.py báº±ng Ä‘oáº¡n code má»›i nÃ y nhÃ©:

Python
        # --- 6. LIá»†T KÃŠ 10 SUBID ÄÃ“NG GÃ“P NHIá»€U NHáº¤T ---
        st.subheader("6. Top 10 SubID Ä‘Ã³ng gÃ³p Ä‘Æ¡n nhiá»u nháº¥t")
        
        # Danh sÃ¡ch cÃ¡c cá»™t Sub_id cáº§n gá»™p
        sub_id_cols = ['Sub_id1', 'Sub_id2', 'Sub_id3', 'Sub_id4', 'Sub_id5']
        
        # Táº¡o má»™t danh sÃ¡ch táº¡m Ä‘á»ƒ chá»©a dá»¯ liá»‡u gá»™p
        sub_data_list = []
        
        for col in sub_id_cols:
            if col in df_filtered.columns:
                # Láº¥y cÃ¡c dÃ²ng cÃ³ dá»¯ liá»‡u Sub_id (khÃ´ng bá»‹ trá»‘ng)
                temp_df = df_filtered[df_filtered[col].notna()][[col, 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)']]
                temp_df.columns = ['Subid_Name', 'HoaHá»“ng']
                sub_data_list.append(temp_df)
        
        if sub_data_list:
            # Gá»™p táº¥t cáº£ cÃ¡c sub_id tá»« 5 cá»™t thÃ nh 1 báº£ng duy nháº¥t
            all_sub_data = pd.concat(sub_data_list)
            
            # NhÃ³m vÃ  tÃ­nh toÃ¡n
            top_sub = all_sub_data.groupby('Subid_Name').agg(
                Sá»‘_lÆ°á»£ng_Ä‘Æ¡n=('Subid_Name', 'count'),
                Sá»‘_tiá»n_hoa_há»“ng=('HoaHá»“ng', 'sum')
            ).reset_index()
            
            # Sáº¯p xáº¿p theo sá»‘ lÆ°á»£ng Ä‘Æ¡n giáº£m dáº§n nhÆ° yÃªu cáº§u
            top_sub = top_sub.sort_values('Sá»‘_lÆ°á»£ng_Ä‘Æ¡n', ascending=False).head(10)
            
            # Äá»‹nh dáº¡ng hiá»ƒn thá»‹
            top_sub['Sá»‘_tiá»n_hoa_há»“ng'] = top_sub['Sá»‘_tiá»n_hoa_há»“ng'].map('{:,.0f} â‚«'.format)
            
            st.table(top_sub) # DÃ¹ng báº£ng tÄ©nh Ä‘á»ƒ nhÃ¬n rÃµ rÃ ng hÆ¡n
        else:
            st.warning("KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u trong cÃ¡c cá»™t Sub_id.")
Táº¡i sao cáº§n thay Ä‘á»•i nÃ y?
Dá»¯ liá»‡u thá»±c táº¿: Trong file cá»§a báº¡n, mÃ£ Facebook cÃ³ thá»ƒ náº±m á»Ÿ Sub_id5, cÃ²n Pincuktech10mini láº¡i náº±m á»Ÿ Sub_id1.

Giáº£i phÃ¡p: Code má»›i sáº½ quÃ©t qua cáº£ 5 cá»™t, nháº·t táº¥t cáº£ cÃ¡c tÃªn báº¡n Ä‘Ã£ Ä‘áº·t ra, gom chÃºng láº¡i thÃ nh má»™t danh sÃ¡ch tá»•ng rá»“i má»›i báº¯t Ä‘áº§u Ä‘áº¿m. NhÆ° váº­y, Facebook hay Video dÃ¹ náº±m á»Ÿ cá»™t nÃ o cÅ©ng sáº½ bá»‹ "tÃ³m gá»n".

CÃ¡ch cáº­p nháº­t lÃªn Hosting:

Má»Ÿ file app.py trÃªn mÃ¡y tÃ­nh, thay Ä‘oáº¡n code cÅ© báº±ng Ä‘oáº¡n code má»›i nÃ y.

VÃ o láº¡i GitHub cá»§a báº¡n.

Báº¥m Add file -> Upload files -> Chá»n file app.py má»›i.

Báº¥m Commit changes.

Äá»£i khoáº£ng 30 giÃ¢y, trang web cá»§a báº¡n sáº½ tá»± Ä‘á»™ng cáº­p nháº­t giao diá»‡n má»›i.

Báº¡n thá»­ cáº­p nháº­t rá»“i upload láº¡i file AffshopeeT12026.csv xem cÃ¡c mÃ£ Pincuktech10mini vÃ  Facebook Ä‘Ã£ lÃªn "top" chÆ°a nhÃ©! TÃ´i cÃ³ thá»ƒ giÃºp báº¡n tinh chá»‰nh thÃªm biá»ƒu Ä‘á»“ náº¿u cáº§n.

Viáº¿t láº¡i cáº£ code má»›i vÃ o code cÅ©

ÄÃ¢y lÃ  toÃ n bá»™ mÃ£ nguá»“n app.py Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t, tÃ­ch há»£p logic gá»™p cáº£ 5 cá»™t Sub_id Ä‘á»ƒ liá»‡t kÃª chÃ­nh xÃ¡c cÃ¡c mÃ£ nhÆ° Facebook, Video, Pincuktech10mini,... Ä‘á»“ng thá»i tá»‘i Æ°u hÃ³a giao diá»‡n hiá»ƒn thá»‹.

Báº¡n hÃ£y copy toÃ n bá»™ ná»™i dung dÆ°á»›i Ä‘Ã¢y vÃ  ghi Ä‘Ã¨ vÃ o file app.py cÅ© trÃªn GitHub nhÃ©.

Python
import streamlit as st
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from datetime import datetime

# Cáº¥u hÃ¬nh trang
st.set_page_config(page_title="Shopee Affiliate Dashboard", layout="wide", page_icon="ğŸ›’")

# --- HÃ€M Xá»¬ LÃ Dá»® LIá»†U ---
@st.cache_data
def load_data(file):
    try:
        df = pd.read_csv(file)
        
        # 1. Xá»­ lÃ½ thá»i gian
        df['Thá»i Gian Äáº·t HÃ ng'] = pd.to_datetime(df['Thá»i Gian Äáº·t HÃ ng'])
        df['NgÃ y'] = df['Thá»i Gian Äáº·t HÃ ng'].dt.date
        df['Giá»'] = df['Thá»i Gian Äáº·t HÃ ng'].dt.hour
        
        # 2. Xá»­ lÃ½ sá»‘ liá»‡u
        cols_to_numeric = [
            'GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)', 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', 
            'Hoa há»“ng Shopee trÃªn sáº£n pháº©m(â‚«)', 'Hoa há»“ng Xtra trÃªn sáº£n pháº©m(â‚«)', 
            'GiÃ¡(â‚«)', 'Sá»‘ lÆ°á»£ng'
        ]
        
        for col in cols_to_numeric:
            if col in df.columns:
                if df[col].dtype == 'object':
                     df[col] = df[col].astype(str).str.replace(',', '').str.replace('â‚«', '').replace('nan', '0')
                df[col] = pd.to_numeric(df[col], errors='coerce').fillna(0)

        # 3. PhÃ¢n loáº¡i nguá»“n Ä‘Æ¡n
        def classify_source(row):
            # Káº¿t há»£p cáº£ cá»™t KÃªnh vÃ  cÃ¡c Sub_id Ä‘á»ƒ tÃ¬m nguá»“n
            search_str = f"{row['KÃªnh']} {row['Sub_id1']} {row['Sub_id2']} {row['Sub_id3']} {row['Sub_id4']} {row['Sub_id5']}".lower()
            if 'video' in search_str: return 'Video'
            if 'live' in search_str: return 'Live'
            if any(x in search_str for x in ['facebook', 'fb', 'group']): return 'Facebook'
            if 'zalo' in search_str: return 'Zalo'
            if 'instagram' in search_str or 'ig' in search_str: return 'Instagram'
            return 'Others'
            
        df['PhÃ¢n loáº¡i nguá»“n'] = df.apply(classify_source, axis=1)
        
        return df
    except Exception as e:
        st.error(f"Lá»—i khi xá»­ lÃ½ dá»¯ liá»‡u: {e}")
        return None

# --- GIAO DIá»†N CHÃNH ---
st.title("ğŸ“Š Shopee Affiliate Analytics Dashboard")
st.markdown("---")

uploaded_file = st.file_uploader("Táº£i lÃªn file bÃ¡o cÃ¡o Shopee (.csv)", type=['csv'])

if uploaded_file is not None:
    df = load_data(uploaded_file)
    
    if df is not None:
        # Sidebar Filter
        st.sidebar.header("Bá»™ lá»c")
        date_range = st.sidebar.date_input("Chá»n khoáº£ng thá»i gian", [df['NgÃ y'].min(), df['NgÃ y'].max()])
        
        if len(date_range) == 2:
            df_filtered = df[(df['NgÃ y'] >= date_range[0]) & (df['NgÃ y'] <= date_range[1])]
        else:
            df_filtered = df

        # --- 1. THá»NG KÃŠ Tá»”NG QUAN ---
        st.header("1. Thá»‘ng KÃª Tá»•ng Quan")
        total_gmv = df_filtered['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)'].sum()
        total_comm = df_filtered['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum()
        comm_shopee = df_filtered['Hoa há»“ng Shopee trÃªn sáº£n pháº©m(â‚«)'].sum()
        comm_xtra = df_filtered['Hoa há»“ng Xtra trÃªn sáº£n pháº©m(â‚«)'].sum()
        total_orders = len(df_filtered)
        avg_comm = total_comm / total_orders if total_orders > 0 else 0
        comm_rate = (total_comm / total_gmv * 100) if total_gmv > 0 else 0

        m1, m2, m3, m4, m5 = st.columns(5)
        m1.metric("Tá»•ng Doanh Thu", f"{total_gmv:,.0f} â‚«")
        m2.metric("Tá»•ng Hoa Há»“ng", f"{total_comm:,.0f} â‚«")
        m3.metric("HH Shopee / Xtra", f"{comm_shopee:,.0f} / {comm_xtra:,.0f}")
        m4.metric("HH Trung bÃ¬nh/ÄÆ¡n", f"{avg_comm:,.0f} â‚«")
        m5.metric("Tá»· lá»‡ HH", f"{comm_rate:.2f}%")

        # --- 2. THá»NG KÃŠ ÄÆ N HÃ€NG ---
        st.header("2. Thá»‘ng KÃª ÄÆ¡n HÃ ng")
        orders_video = df_filtered[df_filtered['PhÃ¢n loáº¡i nguá»“n'] == 'Video'].shape[0]
        orders_live = df_filtered[df_filtered['PhÃ¢n loáº¡i nguá»“n'] == 'Live'].shape[0]
        orders_social = df_filtered[df_filtered['PhÃ¢n loáº¡i nguá»“n'].isin(['Facebook', 'Zalo', 'Instagram'])].shape[0]
        orders_cancelled = df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'].str.contains('Há»§y', case=False, na=False)].shape[0]
        orders_zero = df_filtered[df_filtered['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'] == 0].shape[0]

        c1, c2, c3, c4, c5, c6 = st.columns(6)
        c1.metric("Tá»•ng Ä‘Æ¡n", total_orders)
        c2.metric("ÄÆ¡n Video", orders_video)
        c3.metric("ÄÆ¡n Live", orders_live)
        c4.metric("ÄÆ¡n Social", orders_social)
        c5.metric("ÄÆ¡n 0Ä‘", orders_zero)
        c6.metric("ÄÆ¡n Há»§y", orders_cancelled)

        st.markdown("---")

        # --- 3. BIá»‚U Äá»’ ---
        st.header("3. Biá»ƒu Äá»“ Thá»‘ng KÃª")
        col_a, col_b = st.columns(2)
        
        with col_a:
            # HH theo ngÃ y
            daily_comm = df_filtered.groupby('NgÃ y')['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum().reset_index()
            st.plotly_chart(px.line(daily_comm, x='NgÃ y', y='Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', title="Hoa há»“ng theo ngÃ y"), use_container_width=True)
            
            # ÄÆ¡n hÃ ng theo kÃªnh
            fig_source = px.pie(df_filtered, names='PhÃ¢n loáº¡i nguá»“n', title="Tá»· trá»ng Ä‘Æ¡n hÃ ng theo KÃªnh bÃ¡n")
            st.plotly_chart(fig_source, use_container_width=True)

        with col_b:
            # HH theo giá»
            hourly_comm = df_filtered.groupby('Giá»')['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum().reset_index()
            st.plotly_chart(px.bar(hourly_comm, x='Giá»', y='Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', title="Hoa há»“ng theo khung giá»"), use_container_width=True)
            
            # HH theo danh má»¥c
            cat_comm = df_filtered.groupby('L1 Danh má»¥c toÃ n cáº§u')['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum().nlargest(10).reset_index()
            st.plotly_chart(px.bar(cat_comm, x='Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', y='L1 Danh má»¥c toÃ n cáº§u', orientation='h', title="Top 10 Danh má»¥c"), use_container_width=True)

        st.markdown("---")

        # --- 4, 5, 6. TOP LISTS ---
        col_t1, col_t2 = st.columns(2)
        
        with col_t1:
            st.subheader("4. Top 5 Shop nhiá»u Ä‘Æ¡n nháº¥t")
            top_shops = df_filtered.groupby('TÃªn Shop').agg({'GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)':'sum', 'ID Ä‘Æ¡n hÃ ng':'count', 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)':'sum'}).reset_index()
            top_shops['Tá»· lá»‡ HH'] = (top_shops['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)']/top_shops['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)']*100).round(2)
            st.dataframe(top_shops.sort_values('ID Ä‘Æ¡n hÃ ng', ascending=False).head(5), hide_index=True)

        with col_t2:
            st.subheader("5. Top 5 Sáº£n pháº©m ná»•i báº­t")
            top_prods = df_filtered.groupby('TÃªn Item').agg({'GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)':'sum', 'Sá»‘ lÆ°á»£ng':'sum', 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)':'sum'}).reset_index()
            top_prods['Tá»· lá»‡ HH'] = (top_prods['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)']/top_prods['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)']*100).round(2)
            st.dataframe(top_prods.sort_values('Sá»‘ lÆ°á»£ng', ascending=False).head(5), hide_index=True)

        # Má»¤C 6 Cáº¬P NHáº¬T: QUÃ‰T Cáº¢ 5 Cá»˜T SUB_ID
        st.subheader("6. Top 10 SubID Ä‘Ã³ng gÃ³p Ä‘Æ¡n nhiá»u nháº¥t")
        sub_id_cols = ['Sub_id1', 'Sub_id2', 'Sub_id3', 'Sub_id4', 'Sub_id5']
        sub_list = []
        for col in sub_id_cols:
            if col in df_filtered.columns:
                temp = df_filtered[df_filtered[col].notna()][[col, 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)']]
                temp.columns = ['SubID', 'HoaHá»“ng']
                sub_list.append(temp)
        
        if sub_list:
            all_subs = pd.concat(sub_list).groupby('SubID').agg(Sá»‘_Ä‘Æ¡n=('SubID','count'), Hoa_há»“ng=('HoaHá»“ng','sum')).reset_index()
            st.dataframe(all_subs.sort_values('Sá»‘_Ä‘Æ¡n', ascending=False).head(10), use_container_width=True, hide_index=True)

        st.markdown("---")

        # --- 7. CHI TIáº¾T ÄÆ N HÃ€NG ---
        st.header("7. Chi Tiáº¿t ÄÆ¡n HÃ ng")
        tab_all, tab_pending, tab_cancel = st.tabs(["Táº¥t cáº£ Ä‘Æ¡n", "Chá» xá»­ lÃ½", "ÄÃ£ há»§y"])
        
        show_cols = ['ID Ä‘Æ¡n hÃ ng', 'TÃªn Shop', 'TÃªn Item', 'GiÃ¡(â‚«)', 'Sá»‘ lÆ°á»£ng', 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', 'Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng', 'KÃªnh', 'Sub_id1', 'Sub_id2', 'Sub_id3', 'Sub_id4', 'Sub_id5']
        valid_show_cols = [c for c in show_cols if c in df_filtered.columns]

        with tab_all:
            st.dataframe(df_filtered[valid_show_cols])
        with tab_pending:
            st.dataframe(df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'].str.contains('chá»', case=False, na=False)][valid_show_cols])
        with tab_cancel:
            st.dataframe(df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'].str.contains('há»§y', case=False, na=False)][valid_show_cols])

CÃ¡c Ä‘iá»ƒm má»›i trong báº£n cáº­p nháº­t nÃ y:
Má»¥c 6 (SubID): ÄÃ£ quÃ©t qua toÃ n bá»™ 5 cá»™t Sub_id1 Ä‘áº¿n Sub_id5. Báº¥t ká»ƒ mÃ£ Facebook hay Pincuktech10mini náº±m á»Ÿ cá»™t nÃ o cÅ©ng sáº½ Ä‘Æ°á»£c Ä‘áº¿m vÃ o danh sÃ¡ch tá»•ng.

Má»¥c 3 (Biá»ƒu Ä‘á»“): ThÃªm logic thÃ´ng minh hÆ¡n Ä‘á»ƒ nháº­n diá»‡n nguá»“n Ä‘Æ¡n. Náº¿u trong báº¥t ká»³ cá»™t Sub_id nÃ o cÃ³ chá»©a chá»¯ "Facebook", há»‡ thá»‘ng sáº½ tá»± hiá»ƒu Ä‘Ã³ lÃ  Ä‘Æ¡n tá»« Facebook.

Giao diá»‡n Tabs: Má»¥c 7 Ä‘Æ°á»£c chia thÃ nh cÃ¡c Tabs (Táº¥t cáº£, Chá» xá»­ lÃ½, Há»§y) giÃºp báº¡n chuyá»ƒn Ä‘á»•i nhanh mÃ  khÃ´ng cáº§n cuá»™n trang nhiá»u.

BÆ°á»›c tiáº¿p theo: Báº¡n chá»‰ cáº§n Copy-Paste lÃªn GitHub nhÆ° cÅ©. Dashboard cá»§a báº¡n sáº½ tá»± Ä‘á»™ng cáº­p nháº­t sá»‘ liá»‡u chuáº©n xÃ¡c hÆ¡n!

Liá»‡t kÃª 20 subid hiá»‡u quáº£ nháº¥t, nhÆ°ng hiá»ƒn thá»‹ 10 subid, cho lá»±a chá»n trang 1, trang 2, hoáº·c xem thÃªm

Äá»ƒ thá»±c hiá»‡n yÃªu cáº§u nÃ y, tÃ´i sáº½ cáº­p nháº­t code Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng Pagination (PhÃ¢n trang) cá»§a Streamlit. Äiá»u nÃ y giÃºp báº£ng dá»¯ liá»‡u gá»n gÃ ng hÆ¡n: máº·c Ä‘á»‹nh chá»‰ hiá»‡n 10 dÃ²ng, nhÆ°ng báº¡n cÃ³ thá»ƒ báº¥m chuyá»ƒn sang Trang 2 Ä‘á»ƒ xem ná»‘t 10 dÃ²ng cÃ²n láº¡i.

DÆ°á»›i Ä‘Ã¢y lÃ  Ä‘oáº¡n code hoÃ n chá»‰nh Ä‘Ã£ Ä‘Æ°á»£c tinh chá»‰nh pháº§n Má»¥c 6 vÃ  bá»• sung logic phÃ¢n trang:

Python
import streamlit as st
import pandas as pd
import plotly.express as px

# Cáº¥u hÃ¬nh trang
st.set_page_config(page_title="Shopee Affiliate Dashboard", layout="wide", page_icon="ğŸ›’")

# --- HÃ€M Xá»¬ LÃ Dá»® LIá»†U ---
@st.cache_data
def load_data(file):
    try:
        df = pd.read_csv(file)
        df['Thá»i Gian Äáº·t HÃ ng'] = pd.to_datetime(df['Thá»i Gian Äáº·t HÃ ng'])
        df['NgÃ y'] = df['Thá»i Gian Äáº·t HÃ ng'].dt.date
        df['Giá»'] = df['Thá»i Gian Äáº·t HÃ ng'].dt.hour
        
        cols_to_numeric = ['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)', 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)', 
                           'Hoa há»“ng Shopee trÃªn sáº£n pháº©m(â‚«)', 'Hoa há»“ng Xtra trÃªn sáº£n pháº©m(â‚«)', 
                           'GiÃ¡(â‚«)', 'Sá»‘ lÆ°á»£ng']
        for col in cols_to_numeric:
            if col in df.columns:
                if df[col].dtype == 'object':
                     df[col] = df[col].astype(str).str.replace(',', '').str.replace('â‚«', '').replace('nan', '0')
                df[col] = pd.to_numeric(df[col], errors='coerce').fillna(0)

        def classify_source(row):
            search_str = f"{row['KÃªnh']} {row['Sub_id1']} {row['Sub_id2']} {row['Sub_id3']} {row['Sub_id4']} {row['Sub_id5']}".lower()
            if 'video' in search_str: return 'Video'
            if 'live' in search_str: return 'Live'
            if any(x in search_str for x in ['facebook', 'fb', 'group']): return 'Facebook'
            if 'zalo' in search_str: return 'Zalo'
            return 'Others'
            
        df['PhÃ¢n loáº¡i nguá»“n'] = df.apply(classify_source, axis=1)
        return df
    except Exception as e:
        st.error(f"Lá»—i: {e}")
        return None

# --- GIAO DIá»†N ---
st.title("ğŸ“Š Shopee Affiliate Analytics Dashboard")

uploaded_file = st.file_uploader("Táº£i lÃªn file bÃ¡o cÃ¡o Shopee (.csv)", type=['csv'])

if uploaded_file is not None:
    df = load_data(uploaded_file)
    if df is not None:
        # Filter Sidebar
        st.sidebar.header("Bá»™ lá»c")
        date_range = st.sidebar.date_input("Khoáº£ng thá»i gian", [df['NgÃ y'].min(), df['NgÃ y'].max()])
        df_filtered = df[(df['NgÃ y'] >= date_range[0]) & (df['NgÃ y'] <= date_range[1])] if len(date_range) == 2 else df

        # 1 & 2. Tá»”NG QUAN (Giá»¯ nguyÃªn nhÆ° cÅ©)
        st.header("1 & 2. Tá»•ng Quan & ÄÆ¡n HÃ ng")
        m1, m2, m3, m4 = st.columns(4)
        m1.metric("Tá»•ng Hoa Há»“ng", f"{df_filtered['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum():,.0f} â‚«")
        m2.metric("Tá»•ng Ä‘Æ¡n", len(df_filtered))
        m3.metric("ÄÆ¡n Há»§y", df_filtered[df_filtered['Tráº¡ng thÃ¡i Ä‘áº·t hÃ ng'].str.contains('Há»§y', case=False, na=False)].shape[0])
        m4.metric("Tá»· lá»‡ HH", f"{(df_filtered['Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)'].sum()/df_filtered['GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (â‚«)'].sum()*100):.2f}%")

        st.markdown("---")

        # 3, 4, 5. (Bá» qua code cÅ© Ä‘á»ƒ táº­p trung vÃ o má»¥c 6 báº¡n yÃªu cáº§u)

        # --- 6. LIá»†T KÃŠ 20 SUBID HIá»†U QUáº¢ NHáº¤T (PHÃ‚N TRANG) ---
        st.header("6. Top 20 SubID Ä‘Ã³ng gÃ³p Ä‘Æ¡n nhiá»u nháº¥t")
        
        sub_id_cols = ['Sub_id1', 'Sub_id2', 'Sub_id3', 'Sub_id4', 'Sub_id5']
        sub_list = []
        for col in sub_id_cols:
            if col in df_filtered.columns:
                temp = df_filtered[df_filtered[col].notna()][[col, 'Tá»•ng hoa há»“ng Ä‘Æ¡n hÃ ng(â‚«)']]
                temp.columns = ['SubID', 'HoaHá»“ng']
                sub_list.append(temp)
        
        if sub_list:
            # Gá»™p vÃ  tÃ­nh toÃ¡n Top 20
            all_subs = pd.concat(sub_list).groupby('SubID').agg(
                Sá»‘_Ä‘Æ¡n=('SubID','count'), 
                Hoa_há»“ng=('HoaHá»“ng','sum')
            ).reset_index().sort_values('Sá»‘_Ä‘Æ¡n', ascending=False).head(20)
            
            # Logic PhÃ¢n trang
            page_size = 10
            total_pages = 2 # VÃ¬ láº¥y top 20, má»—i trang 10 nÃªn cÃ³ 2 trang
            
            col_page, _ = st.columns([1, 4])
            page_choice = col_page.selectbox("Chá»n trang hiá»ƒn thá»‹:", [f"Trang 1 (Top 1-10)", f"Trang 2 (Top 11-20)"])
            
            if "Trang 1" in page_choice:
                display_df = all_subs.iloc[0:10]
            else:
                display_df = all_subs.iloc[10:20]
            
            # Hiá»ƒn thá»‹ báº£ng
            display_df['Hoa_há»“ng'] = display_df['Hoa_há»“ng'].map('{:,.0f} â‚«'.format)
            st.table(display_df.reset_index(drop=True))
            
            if st.checkbox("Xem toÃ n bá»™ danh sÃ¡ch (Top 20)"):
                 st.dataframe(all_subs, use_container_width=True)
        else:
            st.warning("KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u SubID.")

        st.markdown("---")
        st.header("7. Chi Tiáº¿t ÄÆ¡n HÃ ng")
        st.dataframe(df_filtered)
Äiá»ƒm cáº£i tiáº¿n:
PhÃ¢n trang (Pagination): TÃ´i Ä‘Ã£ thÃªm má»™t Ã´ selectbox Ä‘á»ƒ báº¡n chá»n xem Trang 1 hoáº·c Trang 2. Äiá»u nÃ y giÃºp giao diá»‡n khÃ´ng bá»‹ quÃ¡ dÃ i.

Xem thÃªm: ThÃªm má»™t nÃºt checkbox "Xem toÃ n bá»™ danh sÃ¡ch" phÃ­a dÆ°á»›i. Náº¿u báº¡n tÃ­ch vÃ o Ä‘Ã³, há»‡ thá»‘ng sáº½ bung toÃ n bá»™ báº£ng 20 dÃ²ng Ä‘á»ƒ báº¡n tiá»‡n Ä‘á»‘i chiáº¿u.

Lá»c dá»¯ liá»‡u thÃ´ng minh: Code váº«n giá»¯ kháº£ nÄƒng quÃ©t cáº£ 5 cá»™t Sub_id Ä‘á»ƒ Ä‘áº£m báº£o mÃ£ Pincuktech10mini hay Facebook khÃ´ng bá»‹ sÃ³t.

CÃ¡ch cáº­p nháº­t: * Báº¡n copy toÃ n bá»™ code trÃªn dÃ¡n Ä‘Ã¨ vÃ o file app.py.

Commit lÃªn GitHub nhÆ° cÃ¡c láº§n trÆ°á»›c.

Refresh láº¡i trang web lÃ  sáº½ tháº¥y tÃ­nh nÄƒng chá»n Trang cho SubID.

Báº¡n cÃ³ muá»‘n tÃ´i thÃªm biá»ƒu Ä‘á»“ cá»™t cho Top 20 SubID nÃ y Ä‘á»ƒ so sÃ¡nh Ä‘á»™ chÃªnh lá»‡ch giá»¯a cÃ¡c mÃ£ khÃ´ng?




Gemini cÃ³ thá»ƒ máº¯c sai sÃ³t, vÃ¬ váº­y, nhá»› xÃ¡c minh cÃ¢u tráº£ lá»i cá»§a Gemini.

